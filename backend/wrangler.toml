name = "wecravery-backend"
main = "src/index.js"
compatibility_date = "2024-09-23"

# Development environment
[env.development]
name = "wecravery-backend-dev"

[env.staging]
name = "wecravery-backend-staging"

[env.production]
name = "wecravery-backend-prod"

# R2 bucket bindings
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "wecravery-photos-dev"
preview_bucket_name = "wecravery-photos-dev"

[env.staging.r2_buckets]
binding = "R2_BUCKET" 
bucket_name = "wecravery-photos-staging"

[env.production.r2_buckets]
binding = "R2_BUCKET"
bucket_name = "wecravery-photos-prod"

# Environment variables - set these using 'wrangler secret put'
# Required secrets:
# FIREBASE_PROJECT_ID - Your Firebase project ID
# Optional secrets (for later):
# STRIPE_SECRET_KEY - Stripe secret key for payments
# STRIPE_WEBHOOK_SECRET - Stripe webhook secret

# Local development settings
[dev]
port = 8787
local_protocol = "http"

# Build configuration
[build]
command = ""

# Triggers (for scheduled functions later)
# [[triggers]]
# crons = ["0 2 * * *"]  # Daily at 2 AM for settlements